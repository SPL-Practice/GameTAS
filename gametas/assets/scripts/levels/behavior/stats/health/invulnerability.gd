extends "res://assets/scripts/levels/behavior/stats/health/vulnerability.gd"

export (bool) var vulnerable = true
var constant = 0

func _on_invulnerability_started():
	vulnerable = false

func _on_invulnerability_ended():
	vulnerable = true
	if value > 0 and constant > 0:
		damage(constant)

func _on_sap(drop):
	if value > 0:
		sap(drop)

func damage(amount):
	if vulnerable:
		.damage(amount)

func release_damage(amount):
	constant -= amount

func hold_damage(amount):
	constant += amount
	damage(amount)
